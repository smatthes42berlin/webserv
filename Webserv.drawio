<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36" version="24.8.6">
  <diagram name="Page-1" id="eRrzwueoh_8adngkIXSs">
    <mxGraphModel dx="2165" dy="2985" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-80" value="Setup" style="ellipse;whiteSpace=wrap;html=1;fillColor=none;noLabel=0;movableLabel=1;fontSize=20;fontStyle=5" vertex="1" parent="1">
          <mxGeometry x="323.75" y="-920" width="1016.25" height="500" as="geometry">
            <mxPoint x="-7" y="-277" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-53" value="Config Parsing" style="ellipse;whiteSpace=wrap;html=1;fillColor=none;noLabel=0;movableLabel=1;fontSize=20;fontStyle=5" vertex="1" parent="1">
          <mxGeometry x="-300" y="-970" width="600" height="750" as="geometry">
            <mxPoint x="-2" y="-392" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-1" value="Client" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="340" y="810" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-2" value="Server" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="970" y="780" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-3" value="Config_Parser" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="970" y="530" width="140" height="140" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-8" value="Request" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="500" y="750" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-9" value="Response" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="500" y="890" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-10" value="Parsing" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="830" y="970" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-13" value="Listening Socket" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-14" value="Client Socket" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="710" y="820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-15" value="&lt;ul&gt;&lt;li&gt;parse config file&lt;/li&gt;&lt;li&gt;open listening sockets&lt;/li&gt;&lt;li&gt;use epoll to check sockets&lt;/li&gt;&lt;ul&gt;&lt;li&gt;accept new connection&lt;/li&gt;&lt;li&gt;read from connection&lt;/li&gt;&lt;li&gt;write to connection&lt;/li&gt;&lt;ul&gt;&lt;li&gt;send answer page&lt;/li&gt;&lt;li&gt;send error page&lt;/li&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li&gt;close Socket after timeout time&lt;/li&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="600" y="760" width="305" height="280" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-17" value="Read until one full request is received" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="1030" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-18" value="Append to Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="1120" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-19" value="Size limit given in header or /cr/lf/cr/lf?" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="530" y="1210" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-1" value="Config_Parser" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-190" y="-860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-3" value="Server" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-130" y="-800" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-4" value="Route" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="77.5" y="-745" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-5" value="listen" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-720" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-6" value="root" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-660" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-7" value="autoindex" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-630" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-8" value="client_max_body_size" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-600" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-9" value="return" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-540" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-10" value="index" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-510" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-11" value="server_name" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-690" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-12" value="error_pages" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-480" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-13" value="vector&amp;lt;Route&amp;gt; routes" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-10" y="-775" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-14" value="location" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-665" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-15" value="root" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-635" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-16" value="autoindex" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-515" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-17" value="client_max_body_size" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-485" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-18" value="return" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-425" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-19" value="index" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-395" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-21" value="error_pages" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-365" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-22" value="alias" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-575" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-23" value="allowed_methods" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-545" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-24" value="alias_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-605" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-25" value="return_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="-455" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-26" value="return_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-137.5" y="-570" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-27" value="ServerManager" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="911.25" y="-692.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-35" value="int epollFd" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="911.25" y="-582.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-37" value="epoll_event ev" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="911.25" y="-612.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-39" value="int eventFd" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="911.25" y="-552.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-43" value="Creates the ServerHandlers" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="911.25" y="-782.5" width="112.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-52" value="when same port and ip, simply add to existinng ServerHandler" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="926.25" y="-852.5" width="170" height="90" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-56" value="vector&amp;lt;Serverhandler&amp;gt;serverhandler" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="681.25" y="-672.5" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-57" value="map&amp;lt;int,Client&amp;gt; clients" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1031.25" y="-672.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-61" value="Client" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1166.25" y="-697.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-62" value="ServerHandler" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563.75" y="-697.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-64" value="sockaddr_in address" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563.75" y="-617.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-65" value="int server_socket" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563.75" y="-587.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-66" value="int port" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563.75" y="-557.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-67" value="int ip" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="563.75" y="-527.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="YM9LCaY8pqyqaQv5ynZD-68" target="YM9LCaY8pqyqaQv5ynZD-3">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="310" y="-657" />
              <mxPoint x="310" y="-840" />
              <mxPoint x="-28" y="-840" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-68" value="vector&amp;lt;Server&amp;gt; servers" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="333.75" y="-672.5" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-70" value="opens listening/server socket" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="436.25" y="-870" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-71" value="many servers from config can have same listening/server socket" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="436.25" y="-800" width="300" height="90" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-81" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=0;exitY=0;exitDx=0;exitDy=0;endWidth=42.22222222222222;endSize=17.62222222222222;width=15.555555555555555;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="YM9LCaY8pqyqaQv5ynZD-27" target="YM9LCaY8pqyqaQv5ynZD-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="-950" as="sourcePoint" />
            <mxPoint x="405" y="-960" as="targetPoint" />
            <Array as="points">
              <mxPoint x="730" y="-880" />
              <mxPoint x="440" y="-1000" />
              <mxPoint x="150" y="-1010" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
