<mxfile host="app.diagrams.net" agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36" version="24.8.8">
  <diagram name="Page-1" id="eRrzwueoh_8adngkIXSs">
    <mxGraphModel dx="2284" dy="1789" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-82" value="Run" style="ellipse;whiteSpace=wrap;html=1;fillColor=none;noLabel=0;movableLabel=1;fontSize=20;fontStyle=5" parent="1" vertex="1">
          <mxGeometry x="370" y="-200" width="1016.25" height="890" as="geometry">
            <mxPoint y="-464" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-80" value="Setup" style="ellipse;whiteSpace=wrap;html=1;fillColor=none;noLabel=0;movableLabel=1;fontSize=20;fontStyle=5" parent="1" vertex="1">
          <mxGeometry x="323.75" y="-920" width="846.25" height="470" as="geometry">
            <mxPoint x="-2" y="-268" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-53" value="Config Parsing" style="ellipse;whiteSpace=wrap;html=1;fillColor=none;noLabel=0;movableLabel=1;fontSize=20;fontStyle=5" parent="1" vertex="1">
          <mxGeometry x="-300" y="-970" width="600" height="750" as="geometry">
            <mxPoint x="-2" y="-392" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-1" value="Client" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="-100" y="1420" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-2" value="Server" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="530" y="1390" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-3" value="Config_Parser" style="whiteSpace=wrap;html=1;aspect=fixed;fontSize=22;" parent="1" vertex="1">
          <mxGeometry x="530" y="1140" width="140" height="140" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-8" value="Request" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="1360" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-9" value="Response" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="60" y="1500" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-10" value="Parsing" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="390" y="1580" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-13" value="Listening Socket" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="1350" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-14" value="Client Socket" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="270" y="1430" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-15" value="&lt;ul&gt;&lt;li&gt;parse config file&lt;/li&gt;&lt;li&gt;open listening sockets&lt;/li&gt;&lt;li&gt;use epoll to check sockets&lt;/li&gt;&lt;ul&gt;&lt;li&gt;accept new connection&lt;/li&gt;&lt;li&gt;read from connection&lt;/li&gt;&lt;li&gt;write to connection&lt;/li&gt;&lt;ul&gt;&lt;li&gt;send answer page&lt;/li&gt;&lt;li&gt;send error page&lt;/li&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li&gt;close Socket after timeout time&lt;/li&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="text;html=1;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="160" y="1370" width="305" height="280" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-17" value="Read until one full request is received" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="1640" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-18" value="Append to Buffer" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="1730" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aeYk51n5nFQIalupaCN_-19" value="Size limit given in header or /cr/lf/cr/lf?" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="90" y="1820" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-1" value="Config_Parser" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-190" y="-860" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-3" value="Server" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-130" y="-800" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-4" value="Route" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="77.5" y="-745" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-5" value="listen" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-720" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-6" value="root" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-660" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-7" value="autoindex" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-630" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-8" value="client_max_body_size" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-600" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-9" value="return" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-540" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-10" value="index" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-510" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-11" value="server_name" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-690" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-12" value="error_pages" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-480" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-13" value="vector&amp;lt;Route&amp;gt; routes" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-10" y="-775" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-14" value="location" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-665" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-15" value="root" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-635" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-16" value="autoindex" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-515" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-17" value="client_max_body_size" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-485" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-18" value="return" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-425" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-19" value="index" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-395" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-21" value="error_pages" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-365" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-22" value="alias" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-575" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-23" value="allowed_methods" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-545" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-24" value="alias_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-605" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-25" value="return_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="70" y="-455" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-26" value="return_is_defined" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="-137.5" y="-570" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-27" value="ServerManager" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="911.25" y="-692.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-56" value="vector&amp;lt;Serverhandler&amp;gt;serverhandler" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="681.25" y="-672.5" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-57" value="map&amp;lt;int,Client&amp;gt; clients" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="911.25" y="25" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-61" value="Client" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1046.25" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-62" value="ServerHandler" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="563.75" y="-697.5" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-64" value="sockaddr_in address" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="563.75" y="-617.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-65" value="int server_socket" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="563.75" y="-587.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-66" value="int port" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="563.75" y="-557.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-67" value="int ip" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="563.75" y="-527.5" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" parent="1" source="YM9LCaY8pqyqaQv5ynZD-68" target="YM9LCaY8pqyqaQv5ynZD-3" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="310" y="-657" />
              <mxPoint x="310" y="-840" />
              <mxPoint x="-28" y="-840" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-68" value="vector&amp;lt;Server&amp;gt; servers" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="333.75" y="-672.5" width="230" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-83" value="ServerManager" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="791.25" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-84" value="int epollFd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="791.25" y="110" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-85" value="epoll_event ev" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="791.25" y="80" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-86" value="int eventFd" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="791.25" y="140" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-88" value="Creates the ServerHandlers" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="990" y="-745" width="100" height="60" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-89" value="when same port and ip, simply add to existinng ServerHandler" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="921.25" y="-800" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-90" value="opens server socket" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="512.5" y="-820" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-92" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;exitX=0;exitY=0;exitDx=0;exitDy=0;endWidth=42.22222222222222;endSize=17.62222222222222;width=15.555555555555555;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="YM9LCaY8pqyqaQv5ynZD-27" target="YM9LCaY8pqyqaQv5ynZD-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="929" y="-681" as="sourcePoint" />
            <mxPoint x="-70" y="-845" as="targetPoint" />
            <Array as="points">
              <mxPoint x="730" y="-880" />
              <mxPoint x="440" y="-1000" />
              <mxPoint x="150" y="-1010" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-91" value="many servers from config can have same server socket" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="590" y="-767.5" width="190" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-93" value="create epoll instance" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="170" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-95" value="register server sockets with epoll" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="862.5" y="230" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-96" value="wait for events on epoll monitored fds" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="862.5" y="285" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-97" value="loop through all events" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="340" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-98" value="get event fd" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="400" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-99" value="check whether event is EPOLLIN - reading event" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="450" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-100" value="accept new connection when event is on server socket" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="510" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-101" value="accept new connection when event is on server socket" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="570" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-102" value="handle Client, when event on existing connection" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-103" value="create client socket and monitor it with epoll" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1046.25" y="510" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-104" value="check for client timeouts and delete them" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="860" y="690" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-105" value="read request" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1040" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-109" value="read content body if necessary" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1217.5" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="YM9LCaY8pqyqaQv5ynZD-110" value="send client response" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1760" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-1" value="parse request" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-2" value="Request" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1424.38" y="550" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-3" value="create response" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1580" y="630" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-4" value="RequestRouter" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1604.38" y="550" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-5" value="validate request" style="whiteSpace=wrap;html=1;shape=mxgraph.basic.roundRectCallout;dx=30;dy=15;size=5;boundedLbl=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1400" y="690" width="168.75" height="70" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-8" value="check whether body needed" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1654.38" y="195" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-9" value="Read request into Client buffer" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1724.38" y="-20" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-10" value="unti header read" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1704.38" y="55" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-11" value="Assign server to client" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1684.38" y="125" width="210" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-12" value="wait until ready" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1630.63" y="265" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-13" value="process" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="1" vertex="1">
          <mxGeometry x="1604.38" y="335" width="220" height="60" as="geometry" />
        </mxCell>
        <mxCell id="5A6jfo2hQdUP_Ugk5Kxi-16" value="sending big files:&amp;nbsp;&lt;div&gt;check whether socket is ready using epoll EPOLLOUT&lt;/div&gt;&lt;div&gt;send it in chunks&lt;/div&gt;&lt;div&gt;always check for readiness before sending&lt;/div&gt;&lt;div&gt;check, that send has&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;gradientColor=#ffd966;" parent="1" vertex="1">
          <mxGeometry x="2180" y="160" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-2" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;" vertex="1" parent="1">
          <mxGeometry x="-660" y="-120" width="130" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-3" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;rotation=-180;" vertex="1" parent="1">
          <mxGeometry x="-253" y="-110" width="143" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-5" value="Loop through epoll-events" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-455" y="-120" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-6" target="mB9LB5dV2l94nnSFnqMY-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-6" value="accept new client" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.plaque;dx=6;whiteSpace=wrap;movableLabel=1;" vertex="1" parent="1">
          <mxGeometry x="-540" y="-45" width="100" height="60" as="geometry">
            <mxPoint y="-46" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-7" target="mB9LB5dV2l94nnSFnqMY-10">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-7" target="mB9LB5dV2l94nnSFnqMY-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-7" value="read request data from client" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.plaque;dx=6;whiteSpace=wrap;movableLabel=1;" vertex="1" parent="1">
          <mxGeometry x="-360" y="35" width="120" height="60" as="geometry">
            <mxPoint y="-46" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-8" value="EPOLLIN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-455" y="-150" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-9" value="Client" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-15" y="-170" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-10" value="all_raw_request_data" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="-90" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-11" value="raw_data_from_one_request" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="-60" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-15" value="vector&amp;lt;Client&amp;gt; clients_with_action" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-480" y="150" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-17" value="header_is_fully_received" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="-30" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-18" value="body_is_needed" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-19" value="body_is_fully_received" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="30" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-21" value="Loop through clients_with_action" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="460" y="830" width="201.25" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-22" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;" vertex="1" parent="1">
          <mxGeometry x="-670" y="195" width="130" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-23" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;rotation=-180;" vertex="1" parent="1">
          <mxGeometry x="-260" y="206" width="143" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-24" target="mB9LB5dV2l94nnSFnqMY-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-24" value="check if header fully received" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="240" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-35" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-25" target="mB9LB5dV2l94nnSFnqMY-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-25" value="parse header" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="295" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-27" value="Yes" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-380" y="270" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=143;entryDy=279;entryPerimeter=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-24" target="mB9LB5dV2l94nnSFnqMY-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-30" value="No" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-285" y="235" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-31" value="continue" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-260" y="205" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-32" value="assign server" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="340" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-33" value="ref_assigned_server" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="60" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-36" target="mB9LB5dV2l94nnSFnqMY-39">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-36" value="body fully received if needed" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="426" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-36" target="mB9LB5dV2l94nnSFnqMY-31">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-290" y="410" as="sourcePoint" />
            <mxPoint x="-250" y="227" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-39" value="process request" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="470" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-41" value="http_response" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-22.5" y="90" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-42" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;" vertex="1" parent="1">
          <mxGeometry x="-680" y="550" width="130" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-43" value="" style="html=1;shadow=0;dashed=0;align=center;verticalAlign=middle;shape=mxgraph.arrows2.uTurnArrow;dy=11;arrowHead=43;dx2=25;rotation=-180;" vertex="1" parent="1">
          <mxGeometry x="-273" y="560" width="143" height="290" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-44" value="Loop through epoll-events" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-475" y="550" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-45" value="accept new client" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.plaque;dx=6;whiteSpace=wrap;movableLabel=1;" vertex="1" parent="1">
          <mxGeometry x="-560" y="625" width="100" height="60" as="geometry">
            <mxPoint y="-46" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-47" target="mB9LB5dV2l94nnSFnqMY-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-47" value="read request data from client" style="verticalLabelPosition=bottom;verticalAlign=top;html=1;shape=mxgraph.basic.plaque;dx=6;whiteSpace=wrap;movableLabel=1;" vertex="1" parent="1">
          <mxGeometry x="-380" y="705" width="120" height="60" as="geometry">
            <mxPoint y="-46" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-48" value="EPOLLOUT" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="-475" y="520" width="170" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-49" value="vector&amp;lt;Client&amp;gt; clients_with_action" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-500" y="820" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-50" target="mB9LB5dV2l94nnSFnqMY-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-50" value="do routing" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-470" y="383" width="167.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="mB9LB5dV2l94nnSFnqMY-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="mB9LB5dV2l94nnSFnqMY-32" target="mB9LB5dV2l94nnSFnqMY-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
